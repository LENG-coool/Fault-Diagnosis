# 설명 가능한 고장 진단의 새로운 접근법:
# 열역학 시뮬레이션 보조 랜덤 포레스트(TSRF)

<br>

::: info [**원본 문헌📜:**](/TSRF.pdf)
*Thermodynamic Simulation-assisted Random Forest: Towards explainable fault diagnosis of combustion chamber components of marine diesel engines*, **Measurement**, 2025.
:::

## 서론 {#서론}
디젤 엔진의 연소실 고장 진단에서 엔지니어링 실무는 다음 세 가지 주요 과제에 오랫동안 직면해 왔습니다:
1. **샘플 부족**: 실제 고장 샘플의 희소성으로 인해 딥러닝 모델의 훈련 효율성이 제한됨;
2. **메커니즘 구현의 어려움**: 순수 물리 모델은 계산 복잡도가 매우 높아 실제 엔지니어링의 실시간 요구 사항을 충족하기 어려움;
3. **블랙박스 딜레마**: 전통적인 모델은 종종 설명 가능성이 부족하여 고장 발생의 내재적 메커니즘을 추적할 수 없음.

이러한 문제를 해결하기 위해 《Measurement》에 발표된 논문은 혁신적이고 실용적인 방법을 제안합니다: 데이터를 사용하여 물리 모델을 피팅하는 것에만 의존하는 대신 물리 시뮬레이션을 사용하여 머신러닝을 보조함으로써 고장 진단의 설명 가능성과 신뢰성을 향상시킵니다.

이러한 아이디어를 기반으로 논문은 **열역학 시뮬레이션 보조 랜덤 포레스트**를 제안합니다. 이는 열역학 메커니즘과 설명 가능한 머신러닝을 결합한 연소실 고장 진단 프레임워크입니다. 소규모 샘플 데이터 환경에서 이 방법은 높은 진단 정확도를 성공적으로 달성하는 동시에 물리 모델과 일치하는 결과를 유지하여 상당한 엔지니어링 응용 가치를 가지고 있습니다.

## 열역학 시뮬레이션 보조 랜덤 포레스트 전체 프레임워크{#프레임워크}
논문에서 제안한 **열역학 시뮬레이션 보조 랜덤 포레스트**(Thermodynamic Simulation-assisted Random Forest, TSRF) 프레임워크는 1차원 열역학 모델, 랜덤 포레스트 분류기 및 SHAP 해석기를 통합하여 폐쇄 루프 고장 진단 시스템을 형성합니다.
1. **데이터 생성 및 전처리**: 열역학 시뮬레이션을 통해 정상 및 고장 작동 조건을 포함하는 종합 데이터 세트를 생성하고 필요한 전처리를 수행합니다.
2. **모델 훈련 및 검증**: 랜덤 포레스트를 사용하여 전처리된 데이터를 훈련하고 교차 검증을 통해 모델 성능을 평가합니다.
3. **설명 가능성 분석**: SHAP 방법을 적용하여 훈련된 모델을 해석하고 주요 열역학 매개변수와 고장 진단에 대한 기여도를 식별합니다.
<img src="/ko图片8.png" style="width: 100%; margin: 0 auto; display: block;" />
<p align="center" style="color: grey">열역학 시뮬레이션 보조 랜덤 포레스트(TSRF) 프레임워크 개략도</p>

## 1차원 열역학 모델 구축 및 보정{#모델}
논문은 먼저 디젤 엔진 연소실의 열역학적 동작을 시뮬레이션하는 **1차원 열역학 모델**을 구축합니다. 실험 데이터와 비교하여 저자는 모델을 정밀하게 보정하여 실제 작동 조건에서 열역학적 특성을 정확하게 반영할 수 있도록 합니다.
<img src="/ko图片7.png"  style="width: 100%; margin: 0 auto; display: block;" />
<p align="center" style="color: grey">디젤 엔진 1차원 열역학 모델 개략도</p>

또한 모델은 **데이터 수집 모듈**(**Data Collection Module, DCM**)에서 획득한 실측 운영 데이터를 통해 보정되어 시뮬레이션 출력과 실제 작동 조건이 주요 열역학 매개변수에서 일치하도록 합니다.
<img src="/ko图片6.png" style="width: 60%; margin: 0 auto; display: block;" />
<p align="center" style="color: grey">데이터 수집 모듈(DCM)</p>

## 연소실 전형적인 고장의 물리적 모델링 및 시뮬레이션{#고장모델링}
모델 보정을 완료한 후 저자는 연소실의 주요 매개변수에 대해 목표 교란을 수행하여 다섯 가지 전형적인 고장을 시뮬레이션했으며, 각 고장 유형마다 명확한 물리적 메커니즘을 지원합니다.
| 고장 번호 | 고장 유형 | 물리적 메커니즘 | 주요 매개변수 조정 |
| ---- | ----- | ---------------------- | ---------------------------- |
| F1   | 실린더 헤드 균열 | 열-기계적 하중으로 인한 균열 발생, 구조 및 방열 능력 저하 | 실린더 헤드 표면 온도 TH 346 °C로 상승 |
| F2   | 피스톤 소손 | 재료 열화로 인한 열 소손, 블로우바이 가속화 | 피스톤 온도 TP 상승 + 경미한 블로우바이(0.01 kg/s) |
| F3   | 실린더 라이너 마모 | 연마 입자 침입으로 인한 기하학적 변형 및 심각한 밀봉 실패 | 실린더 직경 증가 + 대량 블로우바이(0.03 kg/s) |
| F4   | 피스톤 링 마모 | 마모 변형으로 인한 밀봉 열화, 블로우바이 양성 피드백 형성 | 블로우바이 질량 유량 조정(0.02 kg/s) |
| F5   | 피스톤 링 고착 | 카본 축적, 윤활 부족 및 슬러지 축적 | 실린더 직경 변화 + 실린더 라이너 온도 상승 + 블로우바이 |

위의 고장 모델링을 통해 논문은 정상 및 고장 작동 조건을 포괄하는 종합 데이터 세트를 생성하여 후속 머신러닝에 고품질 입력을 제공합니다.

## RF와 SHAP 기반 특징 선택{#특징선택}
데이터 세트 구축이 완료된 후 저자는 **랜덤 포레스트**(** Random Forest, RF**)를 주요 머신러닝 모델로 채택하여 강력한 분류 능력을 활용하여 연소실 고장을 진단합니다. 모델의 설명 가능성을 향상시키기 위해 논문은 **SHAP(SHapley Additive exPlanations)** 방법을 도입하여 모델 출력을 심층 분석합니다.

다음 2단계 전략을 채택하여 선택합니다:

1. 랜덤 포레스트 사전 식별
- RF를 사용하여 매개변수와 고장 유형 간의 매핑 관계를 학습;
- 예측 점수에 따라 각 매개변수의 한계 기여도를 계산.

2. Tree SHAP 정량 분석
- 각 매개변수의 SHAP 값을 계산;
- SHAP 가중치에 따라 진단에 가장 기여하고 물리적 의미가 명확한 매개변수를 선택.
<img src="/ko图片9.png" style="width: 100%; " />
<p align="center" style="color: grey">SHAP 값 기반 매개변수 선택 프로세스</p>

## 실험 결과 및 성능 평가{#실험결과}
논문은 일련의 실험을 통해 TSRF 프레임워크의 효과를 검증합니다. 결과는 이 방법이 소규모 샘플 데이터 환경에서도 95% 이상의 진단 정확도를 달성할 수 있음을 보여주며, 이는 전통적인 블랙박스 모델보다 훨씬 우수합니다.

또한 SHAP 분석은 다양한 고장 유형에서 각 열역학 매개변수의 중요도 분포를 밝혀 엔지니어링 실무에서 고장 근본 원인 분석에 귀중한 참고 자료를 제공합니다.

<br>
<hr>
<div style="display: flex; justify-content: flex-end; padding: 20px 0;">
  <a href="https://ts-rf.github.io/ko/" 
     style="text-decoration: none; color: inherit; border: 1px solid #e2e2e3; padding: 12px 24px; border-radius: 8px; transition: border-color 0.25s; background-color: var(--vp-c-bg-soft);">
    <div style="font-size: 12px; color: var(--vp-c-text-2); margin-bottom: 4px;">자세히 알아보기</div>
    <div style="font-size: 16px; color: var(--vp-c-brand); font-weight: 600;">여기를 클릭 →</div>
  </a>
</div>